<div class="card--stats-overview">

  <% if local_assigns[:flag] %>
    <div class="card__heading">
      <i class="card__flag icon--flag-outline" style="background-image:url('<%= flag %>');"></i>
      <h1 class="card__h1"><%= title %></h1>
    </div>
  <% else %>
    <h1 class="card__h1"><%= title %></h1>
  <% end %>
  
  
  <% if local_assigns[:wdpa_id] && local_assigns[:area] %>
    <div class="card__section">
      <span class="card__number"><%= wdpa_id %></span>
      <span class="card__text-bold"><%= t('stats.wdpa.id') %></span>
    </div>
    <div class="card__section">
      <span class="card__number"><%= area %></span>
      <span class="card__text-bold"><%= t('stats.reported-area') %></span>
    </div>
  <% end %>

  <% if local_assigns[:type] && local_assigns[:location]%>
    <div class="card__section">
      <p>
        <span class="card__text-bold"><%= t('stats.type') %></span>
        <span class="card__text"><%= type %></span>
      </p>
    
      <p>
        <span class="card__text-bold"><%= t('stats.location') %></span>
        <span class="card__text"><%= location %></span>
      </p>
    </div>
  <% end %>

  <% if local_assigns[:story_map_links] && story_map_links.any? %>
    <div class="card__story_map_links">
      <% story_map_links.each do |story_map_link| %>
        <span class="card__story_map_link">
          <span class="card__story_map_link__label">
            <span class="card__story_map_link__label__title">
              <%= t('stats.story_map.title', default: 'Story Map') %>
            </span>
            <span class="card__story_map_link__label__link-type">
              (<%= t('stats.story_map.' + story_map_link.link_type.gsub(/\s/, '_').parameterize, 
                default: story_map_link.link_type)
              %>)
            </span>
          </span>
          <span class="card__story_map_link__download_link">
            <a class="button button--link-external" href="<%= story_map_link.link %>" target="_blank">
              <%= t('stats.story_map.link', default: 'Link') %>
            </a>
          </span>
        </span>
      <% end %>
    </div>
  <% end %>
  
  <% if local_assigns[:total_wdpa] %>
    <div class="card__section">
      <span class="card__number"><%= total_wdpa %></span>
      <span class="card__text-bold"><%= t('stats.wdpa.total') %></span>

      <% unless local_assigns[:total_pame].nil? %>
        <div class="flex">
          <span class="card__number--small"><%= total_pame %></span>
          <span class="card__text"><%= t('stats.pame.with-assessments') %></span>
        </div>
      <% end %>
    </div>
  <% end %>
  
  <% if local_assigns[:total_oecm] %>
    <div class="card__section">
      <span class="card__number">4<%= total_oecm %></span>
      <span class="card__text-bold"><%= t('stats.oecm.title') %></span>
    </div>
  <% end %>

  <% if local_assigns[:total_polygons_percentage] %>
    <div class="card__section">
      <span class="card__text-bold">Polygons/Points ratio</span>
      <span>Polygons <%= total_polygons_percentage %>%</span>
      <span>Points <%= total_points_percentage %>%</span>
    </div>
  <% end %>
</div>