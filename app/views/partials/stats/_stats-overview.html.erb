<div class="card--stats-overview">

  <% if local_assigns[:flag] %>
    <div class="card__heading">
      <i class="card__flag icon--flag-outline" style="background-image:url('<%= flag %>');"></i>
      <h1 class="card__h1"><%= title %></h1>
    </div>
  <% else %>
    <h1 class="card__h1"><%= title %></h1>
  <% end %>
  
  
  <% if local_assigns[:wdpa_id] && local_assigns[:area] %>
    <div class="card__section">
      <span class="card__number"><%= wdpa_id %></span>
      <span class="card__text-bold"><%= t('stats.wdpa.id') %></span>
    </div>
    <div class="card__section">
      <span class="card__number"><%= area %></span>
      <span class="card__text-bold"><%= t('stats.reported-area') %></span>
    </div>
  <% end %>

  <% if local_assigns[:type] && local_assigns[:location]%>
    <div class="card__section">
      <p>
        <span class="card__text-bold"><%= t('stats.type') %></span>
        <span class="card__text"><%= type %></span>
      </p>
    
      <p>
        <span class="card__text-bold"><%= t('stats.location') %></span>
        <span class="card__text"><%= location %></span>
      </p>
    </div>
  <% end %>

  <% if local_assigns[:external_links] %>
  
    <div class="card__story-map-links">
      <% external_links.each do |link| %>
        <div class="story-map-link">
          <span class="story-map-link__label">
            <span class="story-map-link__title"><%#= link.link %></span>
            <span class="story-map-link__text"><%= link[:text] %></span>
          </span>
          
          <a class="story-map-link__link" href="<%= link[:link] %>" target="_blank">
            <%= t('stats.story_map.link', default: 'Link') %>
          </a>
        </div>

        <p><%= link.inspect %></p>
      <% end %>
    </div>
  <% end %>
  
  <% if local_assigns[:total_wdpa] %>
    <div class="card__section">
      <span class="card__number"><%= total_wdpa %></span>
      <span class="card__text-bold"><%= t('stats.wdpa.total') %></span>

      <% unless local_assigns[:total_pame].nil? %>
        <div class="flex">
          <span class="card__number--small"><%= total_pame %></span>
          <span class="card__text"><%= t('stats.pame.with-assessments') %></span>
        </div>
      <% end %>
    </div>
  <% end %>
  
  <% if local_assigns[:total_oecm] %>
    <div class="card__section">
      <span class="card__number">4<%= total_oecm %></span>
      <span class="card__text-bold"><%= t('stats.oecm.title') %></span>
    </div>
  <% end %>

  <% if local_assigns[:total_polygons_percentage] %>
    <div class="card__section">
      <span class="card__text-bold">Polygons/Points ratio</span>
      <span>Polygons <%= total_polygons_percentage %>%</span>
      <span>Points <%= total_points_percentage %>%</span>
    </div>
  <% end %>
</div>